<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Exercises Library – Members</title>
  <link rel="stylesheet" href="../styles.css" />
</head>
<body class="dark">
  <!-- SITE HEADER -->
  <header class="site-header">
    <a href="articles.html">
      <img src="../assets/logo1.png" alt="Defy Elite Athletics" class="logo" />
    </a>
  </header>

  <!-- TOP NAVIGATION BAR -->
  <nav class="main-nav" style="background-color: #111; padding: 0.75rem; text-align: center;">
    <a href="articles.html" style="color:#fff; margin:0 0.5rem; text-decoration:none;">
      Articles
    </a>
    <a href="coaching-resources.html" style="color:#fff; margin:0 0.5rem; text-decoration:none;">
      Coaching
    </a>
    <a href="exercises.html" style="color:#09f; margin:0 0.5rem; text-decoration:none; font-weight:bold;">
      Exercises
    </a>
    <a href="drills.html" style="color:#fff; margin:0 0.5rem; text-decoration:none;">
      Drills
    </a>
  </nav>

  <!-- MAIN CONTENT: EXERCISES LIBRARY -->
  <main class="container" style="max-width:900px; margin:2rem auto; padding:0 1rem;">
    <h1 style="color:#09f; margin-bottom:1rem;">Exercises Library</h1>
    <p style="color:#ddd; margin-bottom:1rem;">
      Browse and search the complete exercises database. Click a column header to sort, or use the search box to filter.
    </p>

    <!-- SEARCH INPUT -->
    <input
      type="text"
      id="exercise-search"
      placeholder="Search exercises..."
      style="width:100%; padding:8px; margin-bottom:1rem; background:#111; color:#fff; border:1px solid #333;"
    />

    <!-- EXERCISES TABLE -->
    <table id="exercise-table" style="width:100%; border-collapse:collapse; background:#111;">
      <thead>
        <tr>
          <th style="padding:8px; border-bottom:1px solid #444; cursor:pointer;" onclick="sortTable(0)">Name</th>
          <th style="padding:8px; border-bottom:1px solid #444; cursor:pointer;" onclick="sortTable(1)">Category</th>
          <th style="padding:8px; border-bottom:1px solid #444; cursor:pointer;" onclick="sortTable(2)">Equipment</th>
          <th style="padding:8px; border-bottom:1px solid #444; cursor:pointer;" onclick="sortTable(3)">Level</th>
        </tr>
      </thead>
      <tbody>
        <!-- Rows will be populated by JavaScript -->
      </tbody>
    </table>
  </main>

  <!-- SITE FOOTER -->
  <footer class="site-footer">
    © 2025 Defy Elite Athletics
  </footer>

  <script>
    // Fetch and display exercises.csv
    async function loadExercises() {
      const response = await fetch('data/exercises.csv');
      const raw = await response.text();
      const lines = raw.trim().split('\n');
      const rows = lines.slice(1).map(line => line.split(','));

      const tbody = document.querySelector('#exercise-table tbody');
      rows.forEach(cells => {
        const tr = document.createElement('tr');
        cells.forEach(cell => {
          const td = document.createElement('td');
          td.textContent = cell;
          td.style.padding = '8px';
          td.style.borderBottom = '1px solid #333';
          td.style.color = '#fff';
          tr.appendChild(td);
        });
        tbody.appendChild(tr);
      });
    }

    // Simple sort function for the table
    function sortTable(colIndex) {
      const table = document.getElementById('exercise-table');
      const tbody = table.tBodies[0];
      const rows = Array.from(tbody.querySelectorAll('tr'));
      const ascending = table.getAttribute('data-sort-col') != colIndex || table.getAttribute('data-sort-dir') === 'desc';

      rows.sort((a, b) => {
        const aText = a.cells[colIndex].textContent.trim().toLowerCase();
        const bText = b.cells[colIndex].textContent.trim().toLowerCase();
        if (!isNaN(parseFloat(aText)) && !isNaN(parseFloat(bText))) {
          return ascending
            ? parseFloat(aText) - parseFloat(bText)
            : parseFloat(bText) - parseFloat(aText);
        }
        return ascending
          ? aText.localeCompare(bText)
          : bText.localeCompare(aText);
      });

      rows.forEach(row => tbody.appendChild(row));
      table.setAttribute('data-sort-col', colIndex);
      table.setAttribute('data-sort-dir', ascending ? 'asc' : 'desc');
    }

    // Filter/search function
    document.getElementById('exercise-search').addEventListener('input', function(e) {
      const filter = e.target.value.toLowerCase();
      const rows = document.querySelectorAll('#exercise-table tbody tr');
      rows.forEach(row => {
        const rowText = row.textContent.toLowerCase();
        row.style.display = rowText.includes(filter) ? '' : 'none';
      });
    });

    // Initialize
    loadExercises();
  </script>
</body>
</html>
