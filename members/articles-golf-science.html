<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Golf Science & Performance News</title>
  <link rel="stylesheet" href="../styles.css" />
  <style>
    .content-section { max-width: 900px; margin: 40px auto; background: #181818; padding: 36px 18px; border-radius: 14px;}
    h1 { color: #1e90ff; margin-bottom: 0.8em;}
    .feed-entry { border-bottom:1px solid #222; padding-bottom:10px; margin-bottom:12px;}
    .feed-entry a { color: #1e90ff; font-weight: 600;}
    .feed-entry small { color: #aaa; }
    .feed-error { color: #ff4444; background: #222; padding:6px 8px; border-radius:8px; margin-bottom:10px;}
  </style>
</head>
<body>
  <header>
    <img src="../assets/logo.png" alt="Defy Elite Athletics Logo" class="logo">
  </header>
  <section class="content-section">
    <h1>Golf Science & Performance News</h1>
    <p>Latest articles, research, and science in golf performance and athletic exercise science.<br>
    <small style="color:#aaa;">If a feed fails to load, youâ€™ll see an error message.</small></p>
    <div id="newsfeed">Loading...</div>
    <a href="articles.html" style="color:#1e90ff;text-decoration:underline;">&larr; Back to Articles Hub</a>
  </section>
  <footer>&copy; 2025 Defy Elite Athletics</footer>
  <script src="https://feednami.com/api/feed.js"></script>
  <script>
    // Start with a few feeds you KNOW will work. Add more as desired.
    var feeds = [
      "https://www.golfdigest.com/rss",
      "https://golf.com/feed/",
      "https://www.golfmonthly.com/feed",
      "https://www.golfwrx.com/feed/",
      "https://thepartrain.libsyn.com/rss",
      "https://bjsm.bmj.com/rss/current.xml"
      // Add more feeds below. Some academic journal feeds may show errors.
      // "https://pubmed.ncbi.nlm.nih.gov/rss/search/1k8VW8BMvF6F57YAVDOPgR5y1ST_SFPL0J7lF45pKzO1GlkvTx/?limit=20&utm_campaign=pubmed-2&fc=20230527102341",
      // "https://golfsciencelab.com/feed/"
    ];

    let allEntries = [];
    let allErrors = [];
    let feedsLoaded = 0;

    feeds.forEach(function(feedUrl){
      feednami.load(feedUrl, function(result){
        feedsLoaded++;
        if(result.error) {
          allErrors.push(`<div class="feed-error"><b>Feed failed:</b> ${feedUrl}<br>Error: ${result.error}</div>`);
        } else {
          var entries = result.feed.entries;
          allEntries = allEntries.concat(entries);
        }
        if (feedsLoaded === feeds.length) {
          allEntries.sort((a,b) => new Date(b.pubDate) - new Date(a.pubDate));
          let html = '';
          if (allEntries.length > 0) {
            allEntries.forEach(entry => {
              html += `<div class="feed-entry">
                  <a href="${entry.link}" target="_blank">${entry.title}</a><br>
                  <small>${entry.pubDate ? new Date(entry.pubDate).toLocaleString() : ''} | ${entry.meta ? entry.meta.title : ''}</small>
                  <div>${entry.summary ? entry.summary.substring(0,180) + '...' : ''}</div>
                </div>`;
            });
          } else {
            html = '<div>No articles found. Try again later or add more feeds.</div>';
          }
          // Show errors (if any) at the top
          document.getElementById("newsfeed").innerHTML = (allErrors.join('') || '') + html;
        }
      });
    });
  </script>
</body>
</html>
