<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Golf Science & Performance</title>
  <link rel="stylesheet" href="../styles.css"/>
  <style>
    body{background:#111;color:#eee;margin:0;font-family:Arial,sans-serif}
    .content{max-width:900px;margin:40px auto;background:#181818;padding:36px;border-radius:14px}
    h1{color:#1e90ff;margin-bottom:12px}
    .entry{border-bottom:1px solid #222;padding:12px 0}
    .entry a{color:#1e90ff;font-weight:600}
    .entry small{color:#aaa;display:block;margin:4px 0;font-size:.9em}
    .error{color:#ff6666;background:#221;border-radius:6px;padding:8px;margin-bottom:12px}
    .back{color:#1e90ff;text-decoration:underline;display:inline-block;margin-top:24px}
  </style>
</head>
<body>
  <header style="text-align:center;padding:20px">
    <img src="../assets/logo.png" alt="Defy Elite Athletics" style="max-width:160px">
  </header>

  <section class="content">
    <h1>Golf Science &amp; Performance</h1>
    <p>Top research &amp; news from journals and elite golf-science sources.</p>
    <div id="feed">Loading…</div>
    <a href="articles.html" class="back">&larr; Back to Articles Hub</a>
  </section>

  <footer style="text-align:center;padding:20px;color:#555">
    &copy; 2025 Defy Elite Athletics
  </footer>

  <script>
    const FEEDS = [
      "https://bjsm.bmj.com/rss/current.xml",                           // BJSM
      "https://golfsciencelab.com/feed/",                                // Golf Science Lab
      "https://www.frontiersin.org/journals/sports/rss",                 // Frontiers in Sports
      "https://journals.humankinetics.com/feed/journals/ijspp.xml"       // Int. J. Sports Phys & Perf
    ];

    let items = [], errors = [], done = 0;
    function sanitize(html){
      const d = document.createElement("div");
      d.innerHTML = html||"";
      return d.textContent||"";
    }
    function render(){
      // sort newest first
      items.sort((a,b)=>new Date(b.pubDate) - new Date(a.pubDate));
      const container = document.getElementById("feed");
      let html = errors.map(e=>`<div class="error">${e}</div>`).join("");
      if(items.length){
        html += items.map(i=>`
          <div class="entry">
            <a href="${i.link}" target="_blank">${i.title}</a>
            <small>${new Date(i.pubDate).toLocaleString()}</small>
            <div>${sanitize(i.description).slice(0,200)}…</div>
          </div>
        `).join("");
      } else {
        html += `<p>No articles found. Try again later.</p>`;
      }
      container.innerHTML = html;
    }

    FEEDS.forEach(url=>{
      fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(url)}`)
        .then(r=>r.json())
        .then(data=>{
          if(data.status!=="ok"){
            errors.push(`Failed to load ${url}`);
          } else {
            data.items.forEach(it=>items.push({
              title: it.title,
              link: it.link,
              pubDate: it.pubDate,
              description: it.description
            }));
          }
        })
        .catch(_=>errors.push(`Cannot fetch ${url}`))
        .finally(()=>{
          done++;
          if(done===FEEDS.length) render();
        });
    });
  </script>
</body>
</html>
